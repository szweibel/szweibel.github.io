---
layout: default
title: Testing
---
<script type="text/javascript">
$( document ).ready(function() {
    // Prevents going to API page, allows showing a success indicator
    $('#dhbox_form_submit').click(function(e){
        e.preventDefault();
        var stuff = { users: [] };
        $('.userwrapper').each(function () { 
            stuff.users.push({ 
            name: $(this).find('[class=users]').val(), 
            pass: $(this).find('[class=passes]').val(), 
            isAdmin: $(this).find('[name=admin]').val() 
            }) 
        });
        stuff = JSON.stringify(stuff);
        console.log(stuff);

        // var formData = $(stuff).serialize();
        $.post('http://Localhost:8080/test', stuff);
    });

    $(document).on('click', '#add', function(e) {
            var intId = $("#the_form div").length + 1;
            var userWrapper = $("<div class=\"userwrapper\" id=\"field" + intId + "\"/>");
            var newUserLabel = $("<label for=\"user" + intId + "\">User:</label>");
            var newUser = $("<input type=\"text\" class=\"users\" name=\"user" + intId + "\" id=\"user" + intId + "\" />");
            var newPassLabel = $("<label for=\"passUser" + intId + "\">Password:</label>");
            var newPass = $("<input type=\"password\" class=\"passes\" name=\"pass" + intId + "\" id=\"passUser" + intId + "\" />");
            var removeButton = $("<input type=\"button\" class=\"remove\" value=\"-\" />");
            removeButton.click(function() {
                $(this).parent().remove();
            });
            userWrapper.append(newUserLabel);
            userWrapper.append(newUser);
            userWrapper.append(newPassLabel);
            userWrapper.append(newPass);
            userWrapper.append(removeButton);
            $("#the_form").append(userWrapper);
        });

    });
    </script>
<div class="col-md-10">
    <form action="http://66.108.238.228:3000/test" id="the_form" method="post">
        <div class='userwrapper' id='field1'>
            <label for='admin'>Administrator:</label>
            <input type'text' class='users' id='admin' name='admin'/>
            <label for='adminPass'>Password:</label>
            <input type'text' type="password" id='adminPass' class='passes' name='adminPass'/>
        </div>
<!--             <input type'text' class='users' name='users'/> -->
    </form>
        <div>
            <input type="button" value="Add a user" class="add" id="add" />
        </div>
        <div>
            <input name="save" id='dhbox_form_submit' type="submit" value="Save" class="btn btn-success" />
        </div>
</div>
<div id='result'></div>
