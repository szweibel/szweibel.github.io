---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const featuredProjects = (await getCollection('projects'))
  .filter(project => project.data.featured)
  .sort((a, b) => (b.data.year || 0) - (a.data.year || 0));
---

<BaseLayout title="Stephen Zweibel - Digital Scholarship Librarian">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-12">
      <div class="mb-8">
        <h1 class="text-4xl font-semibold text-charcoal mb-3">
          Stephen Zweibel
        </h1>
        <p class="text-xl text-warm-gray-600 mb-6">
          Digital Scholarship Librarian, CUNY Graduate Center
        </p>

        <div class="space-y-6 text-charcoal max-w-none leading-relaxed">
          <p>
            I support students and faculty in developing digital projects and working with data, individually and through workshops and classes on research skills and tools.
          </p>
          <p>
            My work focuses on democratizing computational literacy in the humanities through teaching, tool development, and infrastructure projects.
          </p>
        </div>
      </div>
    </div>

    <!-- Selected Projects -->
    {featuredProjects.length > 0 && (
      <div class="border-t border-warm-gray-200 pt-12">
        <h2 class="text-2xl font-semibold text-charcoal mb-8">Selected Projects</h2>
        <div class="space-y-6">
          {featuredProjects.map((project) => (
            <div class="border-l-4 border-rust-500 pl-6 py-2 bg-rust-50 rounded-r-lg shadow-sm hover:shadow-md transition-shadow">
              <h3 class="font-semibold text-charcoal">
                {project.data.github ? (
                  <a href={project.data.github} target="_blank" rel="noopener noreferrer" class="hover:text-rust-600 transition-colors">
                    {project.data.title}
                  </a>
                ) : (
                  <span>{project.data.title}</span>
                )}
              </h3>
              <p class="text-warm-gray-600 mt-2">{project.data.description}</p>
            </div>
          ))}
        </div>
        <div class="mt-8">
          <a href="/projects" class="text-rust-600 hover:text-rust-700 font-medium transition-colors">
            View all projects â†’
          </a>
        </div>
      </div>
    )}

    <!-- Contact -->
    <div class="border-t border-warm-gray-200 pt-12">
      <h2 class="text-2xl font-semibold text-charcoal mb-6">Contact</h2>
      <div class="bg-warm-gray-50 p-8 rounded-lg shadow-sm space-y-2 text-charcoal">
        <p><a href="mailto:szweibel@gc.cuny.edu" class="text-rust-600 hover:text-rust-700 font-medium transition-colors">szweibel@gc.cuny.edu</a></p>
        <p class="text-warm-gray-600">Mina Rees Library, Room 2313</p>
        <p class="text-warm-gray-600">The Graduate Center, CUNY</p>
      </div>
    </div>
  </div>
</BaseLayout>
